# Proposal: Refactor SearchBox UI and Interaction

## Summary
重构 `SearchBox.vue` 组件的UI布局和交互模式，优化搜索体验并增强AI问答能力。主要改动包括:
1. 简化搜索框主界面，移除搜索类型下拉选择器
2. 将3种文本搜索模式选择器移至 `FilterSidebar.vue`
3. 新增图片搜索图标按钮(替代现有上传按钮)
4. 新增AI问答按钮,支持内联问答结果展示
5. 创建 `InlineQAPanel.vue` 组件用于搜索框下方展示问答结果
6. 采用炫彩配色突出AI功能

## Motivation

### 当前问题
1. **搜索框过于复杂**: 搜索类型下拉(全文/图片/问答)、模式选择器(快速/精准/模糊)、上传按钮等控件挤占空间，用户认知负担重
2. **模式切换低效**: 文本搜索模式(快速/精准/模糊)藏在搜索框内部，与筛选器分离，不便于快速调整
3. **图片搜索入口不清晰**: 上传按钮文本描述冗长，视觉权重低
4. **AI问答体验割裂**: 当前问答模式(`searchType='qa'`)切换到独立视图，丢失搜索上下文，无法快速对比搜索结果与问答结果
5. **视觉层次不够**: AI功能与常规搜索使用相同视觉风格，未突出智能化特性

### 用户价值
- **降低认知负担**: 搜索框专注文本输入，次要控件移至侧边栏或图标化
- **提升操作效率**: 模式选择器整合到筛选面板，图片/AI按钮一键触达
- **增强智能感知**: 炫彩AI按钮+内联问答面板强化智能助手形象
- **保持搜索连贯性**: 问答结果就近展示，无需切换视图

## Goals
1. **简化搜索框布局**: 移除搜索类型下拉，仅保留输入框+回车搜索
2. **图标化操作**: 图片搜索改为图标按钮，AI问答新增炫彩图标按钮
3. **筛选器整合**: 文本搜索模式选择器移至 `FilterSidebar.vue` 顶部
4. **内联问答**: 创建 `InlineQAPanel.vue` 在搜索框下方展示问答结果，无需切换视图
5. **视觉优化**: AI按钮采用渐变/荧光色系(紫-蓝-青)区别于常规搜索

## Non-Goals
- 不改动现有搜索API调用逻辑(全文/图片/问答)
- 不修改 `FileChatPanel.vue` 内部实现
- 不影响预览页面的问答功能(保持独立)
- 不调整搜索结果列表展示

## Success Criteria
1. ✅ 搜索框仅包含文本输入区域+图片图标+AI图标+搜索按钮
2. ✅ 回车键触发全文搜索(默认行为)
3. ✅ FilterSidebar顶部新增"搜索模式"section,包含快速/精准/模糊单选
4. ✅ 点击图片图标唤起文件选择器,选择后显示预览chip
5. ✅ 点击AI图标对当前输入框内容发起问答请求
6. ✅ InlineQAPanel在搜索框下方展示问答结果,支持流式输出
7. ✅ AI按钮使用紫-蓝渐变+发光效果,问答面板使用渐变边框
8. ✅ 构建无错误,E2E测试通过

## Risks & Mitigation
- **风险**: 移除搜索类型下拉可能导致图片搜索入口不明显
  - **缓解**: 图片图标足够大且有tooltip提示"图片搜索"
- **风险**: 内联问答可能与搜索结果列表冲突布局
  - **缓解**: QA面板固定高度(300px)+折叠功能,不影响结果列表滚动
- **风险**: 模式选择器移至侧边栏后,首次用户可能找不到
  - **缓解**: 默认展开"搜索模式"section并高亮,添加引导提示

## Dependencies
- 依赖现有 `FileChatPanel.vue` 组件作为问答基础
- 需要后端问答API支持独立调用(非切换到qa视图)
- FilterSidebar需新增section,可能影响其他筛选项布局

## Timeline Estimate
- **设计阶段**: 0.5天(组件拆分+API梳理)
- **实现阶段**: 2天
  - SearchBox重构: 0.5天
  - InlineQAPanel创建: 0.5天
  - FilterSidebar集成: 0.5天
  - 样式优化: 0.5天
- **测试阶段**: 0.5天
- **总计**: 3天

## Open Questions
1. ❓ 内联问答是否需要历史记录功能?(当前假设:单次问答,无历史)
2. ❓ 图片搜索图标样式偏好?(建议:相机/图片icon,与AI图标视觉区分)
3. ❓ 模式选择器是否需要tooltip解释"快速/精准/模糊"含义?
4. ❓ AI问答是否需要Loading骨架屏?(建议:流式输出足以表达加载状态)
